<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼éµè—¥å±€ AI é¡§å• | å°è³¼æ•´åˆç‰ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* === æ¨£å¼ä¿æŒä¸è®Š === */
        :root { --bg: #EAF9F7; --primary: #3E6B65; --accent: #D68C45; --white: #ffffff; --text: #333333; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: "PingFang TC", sans-serif; background-color: var(--bg); color: var(--text); margin: 0; display: flex; flex-direction: column; min-height: 100vh; }
        header { text-align: center; padding: 20px; font-weight: bold; font-size: 1.4rem; color: var(--primary); background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 100; }
        .container { width: 100%; max-width: 800px; margin: 0 auto; padding: 20px; flex: 1; display: flex; flex-direction: column; }
        .progress-fixed { position: fixed; top: 0; left: 0; width: 100%; height: 5px; z-index: 99; }
        .progress-fill { height: 100%; background: var(--accent); width: 0%; transition: width 0.3s; }
        .card { background: var(--white); border-radius: 20px; padding: 40px 30px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); text-align: center; animation: fadeIn 0.4s ease-out; }
        h2 { font-size: 1.6rem; color: var(--primary); margin-bottom: 30px; font-weight: normal; }
        
        #page-profile { display: block; }
        .radio-group { display: flex; justify-content: center; gap: 30px; margin-bottom: 30px; }
        .date-row { display: flex; gap: 10px; justify-content: center; margin-bottom: 10px; }
        select.custom-select { padding: 12px; border: 1px solid #ddd; border-radius: 10px; font-size: 1rem; flex: 1; text-align: center; }
        .age-display { height: 30px; color: var(--accent); font-weight: bold; font-size: 1.1rem; margin-bottom: 30px; }
        .input-row { display: flex; gap: 15px; justify-content: center; margin-bottom: 40px; }
        .input-wrap { position: relative; width: 120px; }
        .input-wrap input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px; font-size: 1.1rem; text-align: center; }
        .input-wrap span { position: absolute; right: 10px; top: 12px; color: #999; }

        #page-quiz { display: none; }
        .category-tag { font-size: 0.9rem; color: #666; border-bottom: 2px solid var(--primary); display: inline-block; padding-bottom: 5px; margin-bottom: 20px; }
        .options-grid { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; }
        .btn-opt { background: white; border: 1px solid #8FAFAF; border-radius: 50px; padding: 15px 30px; font-size: 1.1rem; color: #555; cursor: pointer; min-width: 140px; transition: 0.2s; }
        .btn-opt.selected { background-color: var(--primary); color: white; border-color: var(--primary); font-weight: bold; box-shadow: 0 4px 10px rgba(62, 107, 101, 0.3); }
        .btn-circle { width: 120px; height: 120px; border-radius: 50%; background: white; border: 1px solid #8FAFAF; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; color: #555; cursor: pointer; transition: 0.2s; }
        .btn-circle.selected { border: 3px solid var(--primary); color: var(--primary); font-weight: bold; }
        .footer-nav { margin-top: 40px; display: flex; justify-content: center; gap: 20px; }
        .btn-main { background: var(--primary); color: white; border: none; padding: 14px 60px; border-radius: 50px; font-size: 1.2rem; font-weight: bold; cursor: pointer; min-width: 160px; transition: 0.3s; }
        .btn-prev { background: transparent; color: #888; border: 1px solid #ccc; padding: 14px 30px; border-radius: 50px; font-size: 1rem; cursor: pointer; }

        #page-result { display: none; }
        .dashboard { background: white; border-radius: 20px; padding: 30px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .user-head { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px dashed #eee; padding-bottom: 20px; margin-bottom: 20px; }
        .bmi-bar { height: 10px; background: linear-gradient(90deg, #81C784, #FFD54F, #E57373); border-radius: 5px; position: relative; margin: 20px 0; }
        .bmi-pointer { position: absolute; top: -5px; width: 4px; height: 20px; background: #333; }
        .prod-list { margin-top: 30px; }
        .prod-head { background: #455A64; color: white; padding: 12px 20px; border-radius: 8px 8px 0 0; font-weight: bold; margin-top: 25px; text-align: left; }
        .prod-head.bonus { background: #FBC02D; color: #5D4037; }
        
        /* ç”¢å“å¡ç‰‡æ‡¸åœæ•ˆæœ */
        .prod-item { background: white; border-bottom: 1px solid #eee; padding: 20px; display: flex; align-items: center; text-align: left; transition: all 0.2s; }
        .prod-item:hover { background-color: #F8FDFD; transform: translateX(5px); }
        
        .p-img { width: 80px; height: 80px; background-color: #eee; border-radius: 10px; margin-right: 20px; flex-shrink: 0; background-size: cover; background-position: center; }
        .tag { font-size: 0.8rem; background: #E0F2F1; color: #00695C; padding: 2px 8px; border-radius: 4px; margin-top: 5px; display: inline-block; }
        .p-price { margin-left: auto; font-weight: bold; color: var(--accent); min-width: 80px; text-align: right; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="progress-fixed"><div class="progress-fill" id="progressBar"></div></div>
<header>ğŸ§ ä¼éµè—¥å±€ AI é¡§å•</header>

<div class="container">
    <div id="page-profile" class="card">
        <h2>é¦–å…ˆï¼Œè®“æˆ‘å€‘äº†è§£æ‚¨çš„åŸºæœ¬æ•¸å€¼</h2>
        <div class="radio-group">
            <label style="cursor:pointer"><input type="radio" name="gender" value="ç”·" checked> å…ˆç”Ÿ</label>
            <label style="cursor:pointer"><input type="radio" name="gender" value="å¥³"> å°å§</label>
        </div>
        <div class="date-row" id="date-selectors"></div>
        <div class="age-display" id="age-text"></div>
        <div class="input-row">
            <div class="input-wrap"><input type="number" id="inp-h" placeholder="170"><span>cm</span></div>
            <div class="input-wrap"><input type="number" id="inp-w" placeholder="65"><span>kg</span></div>
        </div>
        <button class="btn-main" onclick="validateAndStart()">ä¸‹ä¸€æ­¥</button>
    </div>

    <div id="page-quiz">
        <div id="quiz-content" class="card"></div>
    </div>

    <div id="page-result"></div>
</div>

<script>
    // ============================================
    // ğŸ›ï¸ è—¥å±€å•†å“è³‡æ–™åº« (è«‹åœ¨æ­¤æ›¿æ›æ‚¨çš„å•†å“èˆ‡é€£çµ)
    // ============================================
    const productsDB = [
        // id: å”¯ä¸€ä»£ç¢¼
        // tags: å°æ‡‰å•é¡Œçš„æ¨™ç±¤ (AI æ¨è–¦ä¾æ“š)
        // url: æ‚¨çš„å•†å“é€£çµ
        // img: æ‚¨çš„å•†å“åœ–ç‰‡ç¶²å€
        
        { id:'b1', name:'ä¼éµæ´»åŠ›Bç¾¤+é‹…', price:650, tags:['#basic_male', '#tired'], url:'https://www.momoshop.com.tw', img:'', desc:'ç·©é‡‹æŠ€è¡“ï¼Œæ•´å¤©å¥½ç²¾ç¥' },
        { id:'b2', name:'é«˜å–®ä½ç¶­ç”Ÿç´ C', price:450, tags:['#basic_female', '#skin_dull'], url:'', img:'', desc:'æŠ—æ°§åŒ–ï¼Œä¿ƒé€²è† åŸè›‹ç™½' },
        { id:'b3', name:'ç¶­ç”Ÿç´  D3 æ»´åŠ‘', price:480, tags:['#no_sun', '#bone_weak'], url:'', img:'', desc:'æ¶²æ…‹å¥½å¸æ”¶ï¼Œé™½å…‰ç‡Ÿé¤Š' },
        { id:'b4', name:'85% rTG é­šæ²¹', price:1200, tags:['#eat_out', '#eye_dry', '#brain_fog'], url:'', img:'', desc:'é«˜æ¿ƒåº¦ Omega-3' },
        
        { id:'s1', name:'GABA æ™šå®‰è† å›Š', price:980, tags:['#sleep_hard', '#stress'], url:'', img:'', desc:'ç¸®çŸ­å…¥ç¡æ™‚é–“' },
        { id:'s2', name:'å°ˆåˆ©èŠéº»ç´  EX', price:850, tags:['#sleep_dream', '#liver'], url:'', img:'', desc:'è­·è‚åŠ©çœ ï¼Œæå‡å“è³ª' },
        
        { id:'d1', name:'300å„„ æ©Ÿèƒ½ç›Šç”ŸèŒ', price:1080, tags:['#constipation', '#immune_bad'], url:'', img:'', desc:'æ’ä¾¿é †æš¢ï¼Œèª¿æ•´é«”è³ª' },
        { id:'d2', name:'ç¶œåˆè”¬æœé…µç´ ', price:750, tags:['#bloating', '#eat_fast'], url:'', img:'', desc:'åˆ†è§£é£Ÿç‰©ï¼Œæ¸›å°‘è„¹æ°£' },
        
        { id:'e1', name:'æ¸¸é›¢å‹è‘‰é»ƒç´ ', price:1200, tags:['#blue_light', '#eye_use_heavy'], url:'', img:'', desc:'å¸æ”¶ç‡ä½³ï¼Œé˜»æ“‹è—å…‰' },
        
        { id:'sk1', name:'è† åŸè›‹ç™½èƒœè‚½', price:1350, tags:['#skin_saggy', '#wrinkle'], url:'', img:'', desc:'å°åˆ†å­ï¼Œå½ˆåŠ›æ”¯æ’' },
        
        { id:'bn1', name:'UC-II è† åŸè›‹ç™½', price:1680, tags:['#joint_pain', '#sport_heavy'], url:'', img:'', desc:'é—œéµéˆæ´»' },
        
        { id:'mn1', name:'é»‘ç‘ªå¡ + ç²¾èƒºé…¸', price:1100, tags:['#man_power', '#tired_morning'], url:'', img:'', desc:'ç”·æ€§æˆ°é¬¥åŠ›' },
        
        { id:'wm1', name:'è”“è¶Šè“ç›Šç”ŸèŒ', price:650, tags:['#private_part'], url:'', img:'', desc:'ç§å¯†å‘µè­·' }
    ];

    // ============================================
    // ğŸ“š 140 é¡Œå®Œæ•´é¡Œåº«
    // ============================================
    const expertDB = {
        'sleep': [
            { q:'èººåœ¨åºŠä¸Šå¾Œï¼Œå¤§æ¦‚ç¿»å¤šä¹…æ‰æœƒçœŸçš„ç¡è‘—å‘¢ï¼Ÿ', type:'circle', options:[{t:'15åˆ†å…§'},{t:'30åˆ†å…§'},{t:'30åˆ†ä»¥ä¸Š',tag:'#sleep_hard'}] },
            { q:'åŠå¤œæœƒä¸æœƒå¸¸å¸¸é†’ä¾†ï¼Ÿ', type:'circle', options:[{t:'ä¸€è¦ºåˆ°å¤©äº®'},{t:'å¶çˆ¾'},{t:'å¸¸å¸¸',tag:'#sleep_wake'}] },
            { q:'ç¡è¦ºæ™‚æ˜¯å¦å¤šå¤¢ï¼Œèµ·åºŠè¦ºå¾—å¥½ç´¯ï¼Ÿ', type:'pill', options:[{t:'å¾ˆå°‘'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸å¤šå¤¢',tag:'#sleep_dream'}] },
            { q:'æ—©ä¸Šé¬§é˜é‚„æ²’éŸ¿å°±é†’äº†ï¼Œè€Œä¸”ç¡ä¸è‘—ï¼Ÿ', type:'pill', options:[{t:'ä¸æœƒ'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸',tag:'#sleep_wake'}] },
            { q:'ç¡å‰ä¸€å°æ™‚ï¼Œæ‚¨é€šå¸¸åœ¨åšä»€éº¼ï¼Ÿ(è¤‡é¸)', type:'pill', multi:true, options:[{t:'æ»‘æ‰‹æ©Ÿ',tag:'#blue_light'},{t:'åƒå®µå¤œ',tag:'#bloating'},{t:'å–é…’',tag:'#liver'},{t:'æ”¾é¬†'}] },
            { q:'è¦ºå¾—æœ€è¿‘å£“åŠ›å¤§åˆ°ã€Œè…¦è¢‹åœä¸ä¸‹ä¾†ã€å—ï¼Ÿ', type:'pill', options:[{t:'é‚„å¥½'},{t:'å¶çˆ¾'},{t:'åœä¸ä¸‹ä¾†',tag:'#stress'}] },
            { q:'å¹³å¸¸æœ‰å–å’–å•¡æˆ–èŒ¶çš„ç¿’æ…£å—ï¼Ÿ', type:'pill', options:[{t:'ä¸å–'},{t:'1æ¯'},{t:'2æ¯ä»¥ä¸Š'}] },
            { q:'æ•é‚Šäººæœ‰èªªéæ‚¨ç¡è¦ºæœƒæ‰“å‘¼å—ï¼Ÿ', type:'pill', options:[{t:'æ²’æœ‰'},{t:'è¼•å¾®'},{t:'å¾ˆå¤§è²'}] },
            { q:'ç›®å‰æœ‰åœ¨åƒå®‰çœ è—¥å¹«åŠ©å…¥ç¡å—ï¼Ÿ', type:'pill', options:[{t:'æ²’æœ‰'},{t:'å¶çˆ¾åƒ'},{t:'é•·æœŸä¾è³´'}] },
            { q:'æ‚¨è¦ºå¾—ç¡ä¸å¥½çš„ä¸»è¦åŸå› æ˜¯ï¼Ÿ', type:'pill', options:[{t:'å£“åŠ›'},{t:'ç’°å¢ƒ'},{t:'èº«é«”ç—›'}] }
        ],
        'digest': [
            { q:'æœ€è¿‘ä¾¿ä¾¿çš„é »ç‡å¤§æ¦‚æ˜¯å¦‚ä½•å‘¢ï¼Ÿ', type:'circle', options:[{t:'æ¯å¤©é †æš¢'},{t:'2-3å¤©ä¸€æ¬¡',tag:'#constipation'},{t:'3å¤©ä»¥ä¸Š',tag:'#constipation'}] },
            { q:'åƒé£½é£¯å¾Œï¼Œè‚šå­æœƒå®¹æ˜“è„¹æ°£ä¸èˆ’æœå—ï¼Ÿ', type:'circle', options:[{t:'å¾ˆå°‘'},{t:'å¶çˆ¾',tag:'#bloating'},{t:'ç¶“å¸¸',tag:'#bloating'}] },
            { q:'æœƒæœ‰ã€Œç«ç‡’å¿ƒã€æˆ–èƒƒç—›çš„æ„Ÿè¦ºå—ï¼Ÿ', type:'pill', options:[{t:'æ²’æœ‰'},{t:'å¶çˆ¾',tag:'#stomach_pain'},{t:'ç¶“å¸¸',tag:'#stomach_pain'}] },
            { q:'å¹³å¸¸é’èœæ°´æœåƒå¾—å¤ å—ï¼Ÿ', type:'pill', options:[{t:'æ¯é¤éƒ½æœ‰'},{t:'ä¸€å¤©ä¸€æ¬¡'},{t:'å¾ˆå°‘åƒ',tag:'#constipation'}] },
            { q:'å–œæ­¡åƒç‚¸ç‰©æˆ–æ˜¯éº»è¾£é‹å—ï¼Ÿ', type:'pill', options:[{t:'å¾ˆå°‘'},{t:'ä¸€é€±1-2æ¬¡'},{t:'ç„¡è¾£ä¸æ­¡',tag:'#stomach_pain'}] },
            { q:'å–ç‰›å¥¶è‚šå­æœƒä¸æœƒå’•åš•å’•åš•æˆ–æ˜¯æ‹‰è‚šå­ï¼Ÿ', type:'pill', options:[{t:'ä¸æœƒ'},{t:'æœƒè„¹æ°£'},{t:'æœƒæ‹‰è‚šå­'}] },
            { q:'ä¸€ç·Šå¼µå°±æœƒæƒ³è·‘å»æ‰€å—ï¼Ÿ', type:'pill', options:[{t:'ä¸æœƒ'},{t:'å¶çˆ¾'},{t:'æœƒ(è…¸èº)'}] },
            { q:'å¹³å¸¸æ°´æœ‰å–å¤ å—ï¼Ÿ(é«”é‡ x 30cc)', type:'pill', options:[{t:'æœ‰å–å¤ '},{t:'ä¸å¤ªå¤ ',tag:'#constipation'}] },
            { q:'ä¸‰é¤æ˜¯åœ¨å¤–é¢åƒæ¯”è¼ƒå¤šå—ï¼Ÿ', type:'pill', options:[{t:'è‡ªç…®'},{t:'ä¸€åŠä¸€åŠ'},{t:'ä¸‰é¤è€å¤–',tag:'#eat_out'}] },
            { q:'ä¾¿ä¾¿å½¢ç‹€çœ‹èµ·ä¾†åƒï¼Ÿ', type:'pill', options:[{t:'é¦™è•‰ç‹€'},{t:'ç¾Šä¾¿ä¾¿',tag:'#constipation'},{t:'ç³Šç‹€'}] }
        ],
        'eye': [
            { q:'æ¯å¤©ç›¯è‘—è¢å¹•(æ‰‹æ©Ÿ/é›»è…¦)çš„æ™‚é–“ï¼Ÿ', type:'circle', options:[{t:'4å°æ™‚å…§'},{t:'4-8å°æ™‚',tag:'#blue_light'},{t:'è¶…é8å°æ™‚',tag:'#eye_use_heavy'}] },
            { q:'åˆ°äº†ä¸‹åˆï¼Œçœ¼ç›æœƒè¦ºå¾—ä¹¾ä¹¾æ¾€æ¾€çš„å—ï¼Ÿ', type:'circle', options:[{t:'ä¸æœƒ'},{t:'ç¨å¾®ä¹¾',tag:'#eye_dry'},{t:'éå¸¸ä¹¾æ¾€',tag:'#eye_dry'}] },
            { q:'çœ‹æ±è¥¿æœƒä¸æœƒè¦ºå¾—ç³Šç³Šçš„ï¼Œçœ¨çœ¼æ‰å¥½è½‰ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾',tag:'#focus_bad'},{t:'ç¶“å¸¸',tag:'#focus_bad'}] },
            { q:'æ™šä¸Šé–‹è»Šæˆ–åœ¨æš—è™•ï¼Œæœƒè¦ºå¾—è¦–åŠ›è®Šå·®å—ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'ç¨å¾®'},{t:'æ˜é¡¯çœ‹ä¸æ¸…'}] },
            { q:'æ˜¯å¦æœ‰é£›èšŠç—‡(çœ¼å‰æœ‰é»‘é»é£„å‹•)ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'å¶çˆ¾'},{t:'é•·æœŸå­˜åœ¨'}] },
            { q:'é…æˆ´éš±å½¢çœ¼é¡çš„ç¿’æ…£ï¼Ÿ', type:'pill', options:[{t:'ä¸æˆ´'},{t:'æ—¥æ‹‹'},{t:'æ¯å¤©>8å°æ™‚',tag:'#eye_dry'}] },
            { q:'æ˜¯å¦å¸¸åƒæ·±ç¶ è‰²è”¬èœ(è‘‰é»ƒç´ )ï¼Ÿ', type:'pill', options:[{t:'å¸¸åƒ'},{t:'æ™®é€š'},{t:'ä¸æ„›åƒ'}] },
            { q:'æ˜¯å¦å¸¸æ„Ÿåˆ°çœ¼çª©ç— ç—›ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸',tag:'#eye_use_heavy'}] },
            { q:'æˆ¶å¤–æ´»å‹•é »ç‡ï¼Ÿ', type:'pill', options:[{t:'éƒ½åœ¨å®¤å…§'},{t:'é€±æœ«'},{t:'æ¯å¤©'}] },
            { q:'å®¶æ—æœ‰é’å…‰çœ¼/é»ƒæ–‘éƒ¨ç—…è®Šå²å—ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'æœ‰'}] }
        ],
        'energy': [
            { q:'ä¸€å¤©ç•¶ä¸­ï¼Œä»€éº¼æ™‚å€™è¦ºå¾—æœ€ç´¯ï¼Ÿ', type:'pill', options:[{t:'èµ·åºŠæ™‚',tag:'#tired_morning'},{t:'é£¯å¾Œ'},{t:'æ•´å¤©éƒ½ç´¯',tag:'#tired'}] },
            { q:'ç¡é£½ä¹‹å¾Œï¼Œé«”åŠ›æœ‰æ¢å¾©çš„æ„Ÿè¦ºå—ï¼Ÿ', type:'pill', options:[{t:'æœ‰å……é£½é›»'},{t:'ç¨å¾®'},{t:'ç¡å†ä¹…é‚„æ˜¯ç´¯',tag:'#tired'}] },
            { q:'å¦‚æœä¸å–å’–å•¡ï¼Œæœƒç„¡æ³•å·¥ä½œå—ï¼Ÿ', type:'pill', options:[{t:'ä¸æœƒ'},{t:'æœƒæ²’ç²¾ç¥'},{t:'å®Œå…¨ç„¡æ³•é‹ä½œ'}] },
            { q:'ç›®å‰æœ‰è¦å¾‹çš„é‹å‹•ç¿’æ…£å—ï¼Ÿ', type:'pill', options:[{t:'æ¯é€±3æ¬¡+'},{t:'æ¯é€±1-2æ¬¡'},{t:'å¹¾ä¹æ²’æœ‰'}] },
            { q:'æ˜¯å¦è¦ºå¾—å¾ˆé›£é›†ä¸­ç²¾ç¥(è…¦éœ§æ„Ÿ)ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'æ˜¯,è…¦è¢‹éˆéˆ',tag:'#brain_fog'}] },
            { q:'æ˜¯å¦æœ‰ç†¬å¤œç¿’æ…£ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸',tag:'#liver'}] },
            { q:'è¹²ä¸‹ç«™èµ·æ˜¯å¦å®¹æ˜“é ­æšˆï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] },
            { q:'æ˜¯å¦å¸¸åƒç²¾ç·»æ¾±ç²‰(éºµåŒ…/éºµé£Ÿ)ï¼Ÿ', type:'pill', options:[{t:'å°‘åƒ'},{t:'æ™®é€š'},{t:'æ¯é¤éƒ½æ˜¯'}] },
            { q:'æ˜¯å¦ç‰¹åˆ¥æ€•å†·ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å†¬å¤©æœƒ'},{t:'ä¸€å¹´å››å­£'}] },
            { q:'è¦ºå¾—ç–²ç´¯ä¸»å› æ˜¯ï¼Ÿ', type:'pill', options:[{t:'å·¥ä½œ'},{t:'ç¡çœ '},{t:'å£“åŠ›'}] }
        ],
        'mood': [
            { q:'æœ€è¿‘å£“åŠ›æŒ‡æ•¸(1-10)ï¼Ÿ', type:'circle', options:[{t:'ä½(1-3)'},{t:'ä¸­(4-7)'},{t:'é«˜(8-10)',tag:'#stress'}] },
            { q:'æ˜¯å¦å®¹æ˜“æ„Ÿåˆ°ç„¦æ…®æˆ–ç·Šå¼µï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸',tag:'#stress'}] },
            { q:'æ˜¯å¦å› ç…©æƒ±è€Œå½±éŸ¿ç¡çœ ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸å¤±çœ ',tag:'#sleep_hard'}] },
            { q:'å·¥ä½œæ™‚æ˜¯å¦é›£ä»¥å°ˆæ³¨ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'ç¨å¾®'},{t:'åš´é‡å½±éŸ¿'}] },
            { q:'å®¹æ˜“å°å‘¨é­çš„äººæ„Ÿåˆ°ä¸è€ç…©ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸æ˜“æ€’'}] },
            { q:'ä¸‹ç­å¾Œèƒ½çœŸæ­£æ”¾é¬†å—ï¼Ÿ', type:'pill', options:[{t:'å¯ä»¥'},{t:'å¾ˆé›£'},{t:'å®Œå…¨ç„¡æ³•'}] },
            { q:'æ˜¯å¦æœ‰è£œå……éˆ£/é‚é£Ÿç‰©ï¼Ÿ', type:'pill', options:[{t:'æœ‰'},{t:'å¶çˆ¾'},{t:'å¾ˆå°‘'}] },
            { q:'ç·Šå¼µæ™‚èº«é«”æœƒæœ‰åæ‡‰(èƒƒç—›)å—ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] },
            { q:'æ˜¯å¦ä¸æƒ³èˆ‡äººæ¥è§¸ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'çœ‹å¿ƒæƒ…'},{t:'æƒ³å°é–‰è‡ªå·±'}] },
            { q:'å£“åŠ›å¤§æ™‚æœƒæš´é£²æš´é£Ÿå—ï¼Ÿ', type:'pill', options:[{t:'ä¸æœƒ'},{t:'æœƒ'}] }
        ],
        'skin': [
            { q:'æ‚¨è¦ºå¾—è‡ªå·±çš„è†šè³ªåå‘ï¼Ÿ', type:'pill', options:[{t:'ä¸­æ€§'},{t:'ä¹¾æ€§',tag:'#skin_dry'},{t:'æ²¹æ€§'},{t:'æ··åˆæ€§'}] },
            { q:'æœ€æƒ³æ”¹å–„çš„å•é¡Œï¼Ÿ(è¤‡é¸)', type:'pill', multi:true, options:[{t:'ç—˜ç—˜',tag:'#liver'},{t:'æš—æ²ˆ',tag:'#skin_dull'},{t:'ç´°ç´‹',tag:'#wrinkle'},{t:'æ•æ„Ÿ'}] },
            { q:'æ´—å®Œè‡‰å¾Œï¼Œçš®è†šæœƒè¦ºå¾—ç·Šç¹ƒå—ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'ç¨å¾®'},{t:'éå¸¸ç·Šç¹ƒ',tag:'#skin_dry'}] },
            { q:'æ˜¯å¦è¦ºå¾—è‡‰é °å½ˆæ€§è®Šå·®ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'æœ‰ä¸€é»'},{t:'æ˜é¡¯è®Šå·®',tag:'#skin_saggy'}] },
            { q:'å–œæ­¡åƒç”œé£Ÿæˆ–æ‰‹æ–é£²å—ï¼Ÿ', type:'pill', options:[{t:'ä¸æ„›'},{t:'å¶çˆ¾'},{t:'æ¯å¤©éƒ½è¦'}] },
            { q:'å‡ºé–€æœ‰æ“¦é˜²æ›¬çš„ç¿’æ…£å—ï¼Ÿ', type:'pill', options:[{t:'æ¯å¤©'},{t:'çœ‹å¤ªé™½'},{t:'å¾ˆå°‘æ“¦'}] },
            { q:'ç†¬å¤œå¾Œçš®è†šæœƒè®Šå·®å—ï¼Ÿ', type:'pill', options:[{t:'é‚„å¥½'},{t:'æœƒæš—æ²ˆ'},{t:'æœƒçˆ†ç—˜'}] },
            { q:'ä¾¿ç§˜æ™‚çš®è†šæœƒè®Šå·®å—ï¼Ÿ', type:'pill', options:[{t:'ç„¡é—œ'},{t:'æœ‰æ„Ÿè¦º'}] },
            { q:'æ›å­£æ˜¯å¦å®¹æ˜“éæ•ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] },
            { q:'æ˜¯å¦æœ‰è£œå……è† åŸè›‹ç™½ï¼Ÿ', type:'pill', options:[{t:'æœ‰'},{t:'ç„¡'}] }
        ],
        'hair': [
            { q:'æ´—é ­æ™‚æ‰é«®é‡æ˜é¡¯å—ï¼Ÿ', type:'circle', options:[{t:'æ­£å¸¸'},{t:'æ¯”ä»¥å‰å¤š'},{t:'æ˜é¡¯è®Šå¤š'}] },
            { q:'æ˜¯å¦æ„Ÿè¦ºé«®éš›ç·šå¾Œé€€ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'ç¨å¾®'},{t:'æ˜é¡¯'}] },
            { q:'é ­çš®å®¹æ˜“å‡ºæ²¹å—ï¼Ÿ', type:'pill', options:[{t:'ä¹¾æ€§'},{t:'ä¸­æ€§'},{t:'æ²¹æ€§'}] },
            { q:'æ˜¯å¦æœ‰é ­çš®å±‘å›°æ“¾ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] },
            { q:'ç›®å‰é«®è³ªç‹€æ³ï¼Ÿ', type:'pill', options:[{t:'å¥åº·'},{t:'ä¹¾ç‡¥æ˜“æ–·'},{t:'ç´°è»Ÿæ‰å¡Œ'}] },
            { q:'æ˜¯å¦æœ‰ç™½é«®å›°æ“¾ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'æœ‰äº›è¨±'},{t:'æ˜é¡¯å¢åŠ '}] },
            { q:'è›‹ç™½è³ªæ”å–è¶³å¤ å—ï¼Ÿ', type:'pill', options:[{t:'è¶³å¤ '},{t:'æ™®é€š'},{t:'ä¸è¶³'}] },
            { q:'è¿‘æœŸæœ‰ç”Ÿç—…æˆ–å£“åŠ›å¤§å—ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'æœ‰'}] },
            { q:'å®¶æ—æœ‰é›„æ€§ç¦¿éºå‚³å—ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'æœ‰'}] },
            { q:'æ˜¯å¦æœ‰æŸ“ç‡™ç¿’æ…£ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] }
        ],
        'man': [
            { q:'æ•´é«”ç²¾ç¥æ´»åŠ›å¦‚ä½•ï¼Ÿ', type:'circle', options:[{t:'å……æ²›'},{t:'æ™®é€š'},{t:'åŠ›ä¸å¾å¿ƒ',tag:'#man_power'}] },
            { q:'åŠå¤œéœ€è¦èµ·åºŠä¸Šå»æ‰€å—ï¼Ÿ', type:'pill', options:[{t:'0æ¬¡'},{t:'1æ¬¡'},{t:'2æ¬¡ä»¥ä¸Š'}] },
            { q:'æ’å°¿æ˜¯å¦æœ‰è®Šç´°æˆ–è§£ä¸ä¹¾æ·¨ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] },
            { q:'è¿‘æœŸå°è¦ªå¯†é—œä¿‚çš„èˆˆè¶£ï¼Ÿ', type:'pill', options:[{t:'æ­£å¸¸'},{t:'ç¨å¾®é™ä½'},{t:'æ˜é¡¯é™ä½',tag:'#man_power'}] },
            { q:'é‹å‹•æ™‚é«”åŠ›ä¸‹é™å¾ˆå¿«ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'ç¨å¾®'},{t:'æ˜é¡¯æµå¤±'}] },
            { q:'ä¸»è¦å£“åŠ›ä¾†æºï¼Ÿ', type:'pill', options:[{t:'å·¥ä½œ'},{t:'å®¶åº­'},{t:'ç¶“æ¿Ÿ'}] },
            { q:'æ˜¯å¦æœ‰ç…™é…’ç¿’æ…£ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'å¶çˆ¾'},{t:'ç¿’æ…£æ€§'}] },
            { q:'æ˜¯å¦æœ‰è…¹éƒ¨è‚¥èƒ–ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'æœ‰ä¸€é»'},{t:'æ˜é¡¯'}] },
            { q:'è¿‘æœŸæœ‰å‚™å­•è¨ˆç•«å—ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'è€ƒæ…®ä¸­'},{t:'å‚™å­•ä¸­'}] },
            { q:'æ˜¯å¦æœ‰è½é«®å›°æ“¾ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'è¼•å¾®'},{t:'æ˜é¡¯'}] }
        ],
        'woman': [
            { q:'æœˆç¶“é€±æœŸæ˜¯å¦è¦å¾‹ï¼Ÿ', type:'circle', options:[{t:'è¦å¾‹'},{t:'å¶çˆ¾ä¸æº–'},{t:'ç¶“å¸¸äº‚ç¶“'}] },
            { q:'ç”Ÿç†æœŸæœƒä¸æœƒç¶“ç—›ï¼Ÿ', type:'pill', options:[{t:'ç„¡æ„Ÿ'},{t:'è¼•å¾®'},{t:'ç—›éœ€åƒè—¥'}] },
            { q:'ç¶“å‰æ˜¯å¦æœ‰ä¸é©(PMS)ï¼Ÿ', type:'pill', multi:true, options:[{t:'ç„¡'},{t:'èƒ¸æ¼²'},{t:'æƒ…ç·’æš´èº'},{t:'æ°´è…«'}] },
            { q:'æ˜¯å¦æœ‰ç§å¯†è™•å›°æ“¾ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸',tag:'#private_part'}] },
            { q:'æ˜¯å¦æ›¾åè¦†æ„ŸæŸ“(å°¿é“/é™°é“)ï¼Ÿ', type:'pill', options:[{t:'å¾æœª'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸åè¦†',tag:'#private_part'}] },
            { q:'æ˜¯å¦æœ‰æ›´å¹´æœŸç—‡ç‹€ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'è¼•å¾®'},{t:'æ˜é¡¯'}] },
            { q:'ç”Ÿç†æœŸå®¹æ˜“é ­æšˆ(ç¼ºéµ)å—ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'ç¨å¾®'},{t:'æ˜¯'}] },
            { q:'æ˜¯å¦æœ‰æ†‹å°¿ç¿’æ…£ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¿™ç¢Œæ™‚æœƒ'},{t:'ç¶“å¸¸'}] },
            { q:'ç›®å‰å‚™å­•ç‹€æ…‹ï¼Ÿ', type:'pill', options:[{t:'ç„¡è¨ˆç•«'},{t:'å‚™å­•ä¸­'},{t:'æ‡·å­•/å“ºä¹³'}] },
            { q:'æ˜¯å¦æœ‰è£œå……ç›Šç”ŸèŒï¼Ÿ', type:'pill', options:[{t:'æœ‰'},{t:'ç„¡'}] }
        ],
        'bone': [
            { q:'ä¸Šä¸‹æ¨“æ¢¯è†è“‹æœƒç—›å—ï¼Ÿ', type:'circle', options:[{t:'å¦'},{t:'å¶çˆ¾ç— è»Ÿ'},{t:'ç¶“å¸¸ç–¼ç—›',tag:'#joint_pain'}] },
            { q:'æ´»å‹•é—œç¯€æœ‰å¡å¡è²å—ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'æœ‰è²ä¸ç—›'},{t:'æœ‰è²ä¸”ç—›',tag:'#joint_pain'}] },
            { q:'èµ·åºŠæ˜¯å¦è¦ºå¾—é—œç¯€åƒµç¡¬ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'ç¨å¾®'},{t:'æ˜¯'}] },
            { q:'èˆŠå‚·å¤©æ°£è®Šå°±é…¸ç—›ï¼Ÿ', type:'pill', options:[{t:'ç„¡èˆŠå‚·'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] },
            { q:'å¹³å¸¸æœ‰æ”å–éˆ£è³ª(å¥¶/é­š)å—ï¼Ÿ', type:'pill', options:[{t:'æ¯å¤©'},{t:'å¶çˆ¾'},{t:'å¾ˆå°‘',tag:'#bone_weak'}] },
            { q:'å¸¸æ›¬å¤ªé™½(ç¶­ç”Ÿç´ D)å—ï¼Ÿ', type:'pill', options:[{t:'æ­£å¸¸'},{t:'å¶çˆ¾'},{t:'å®Œå…¨é˜²æ›¬',tag:'#no_sun'}] },
            { q:'æœ‰åšé‡è¨“/è‚ŒåŠ›è¨“ç·´å—ï¼Ÿ', type:'pill', options:[{t:'æœ‰'},{t:'ç„¡'}] },
            { q:'å®¶æ—æœ‰éª¨é¬†ç—…å²å—ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'æœ‰'}] },
            { q:'æ¯æ—¥å’–å•¡å› æ”å–ï¼Ÿ', type:'pill', options:[{t:'ä¸å–'},{t:'1æ¯'},{t:'2æ¯ä»¥ä¸Š'}] },
            { q:'æ˜¯å¦å¸¸è…°é…¸èƒŒç—›ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] }
        ],
        'circ': [
            { q:'å†¬å¤©æ‰‹è…³å®¹æ˜“å†°å†·å—ï¼Ÿ', type:'circle', options:[{t:'å¦'},{t:'ç¨å¾®'},{t:'åƒå†°å¡Šä¸€æ¨£',tag:'#circ_bad'}] },
            { q:'ä¹…åæ™‚æ‰‹è…³å®¹æ˜“ç™¼éº»å—ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸',tag:'#circ_bad'}] },
            { q:'è¹²ä¸‹ç«™èµ·æœƒé ­æšˆå—ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] },
            { q:'è…¿éƒ¨æœ‰é’ç­‹æµ®èµ·æˆ–è…«è„¹å—ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'è¼•å¾®'},{t:'æ˜é¡¯'}] },
            { q:'å¸¸è¦ºå¾—è‚©è†€è„–å­åƒµç¡¬ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] },
            { q:'è¡€å£“æ˜¯å¦åé«˜ï¼Ÿ', type:'pill', options:[{t:'æ­£å¸¸'},{t:'åé«˜',tag:'#high_bp'},{t:'æœ‰é«˜è¡€å£“',tag:'#high_bp'}] },
            { q:'é£²é£Ÿåé‡å£å‘³(é¹¹)å—ï¼Ÿ', type:'pill', options:[{t:'æ¸…æ·¡'},{t:'æ™®é€š'},{t:'é‡å£å‘³'}] },
            { q:'æ˜¯å¦æœ‰è£œå……é­šæ²¹ï¼Ÿ', type:'pill', options:[{t:'æœ‰'},{t:'ç„¡'}] },
            { q:'æ˜¯å¦å¶çˆ¾æ„Ÿåˆ°å¿ƒæ‚¸ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] },
            { q:'æœ‰è¦å¾‹æœ‰æ°§é‹å‹•å—ï¼Ÿ', type:'pill', options:[{t:'æœ‰'},{t:'ç„¡'}] }
        ],
        'immune': [
            { q:'å¹³å‡ä¸€å¹´æ„Ÿå†’å¹¾æ¬¡ï¼Ÿ', type:'circle', options:[{t:'0-1æ¬¡'},{t:'2-3æ¬¡'},{t:'3æ¬¡ä»¥ä¸Š',tag:'#immune_bad'}] },
            { q:'ç”Ÿç—…å¾Œå¾©åŸé€Ÿåº¦ï¼Ÿ', type:'pill', options:[{t:'å¾ˆå¿«'},{t:'æ™®é€š'},{t:'å¾ˆä¹…'}] },
            { q:'æœ‰éæ•é«”è³ª(é¼»/çš®è†š)å—ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'æ›å­£æœ‰'},{t:'é•·æœŸå›°æ“¾'}] },
            { q:'å®¹æ˜“å˜´ç ´æˆ–å£è§’ç‚å—ï¼Ÿ', type:'pill', options:[{t:'å¾ä¸'},{t:'å¶çˆ¾'},{t:'ç†¬å¤œå°±ç ´'}] },
            { q:'å‹ç´¯æ™‚æœƒé•·çš°ç–¹å—ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸å¾©ç™¼'}] },
            { q:'æ˜¯å¦æœ‰ä¾¿ç§˜å•é¡Œï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'æœ‰'}] },
            { q:'æ˜¯å¦åš´é‡åé£Ÿï¼Ÿ', type:'pill', options:[{t:'å‡è¡¡'},{t:'åé£Ÿ'}] },
            { q:'ç¡çœ ä¸è¶³å®¹æ˜“ç”Ÿç—…å—ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'æ˜é¡¯'}] },
            { q:'æœ‰è¦å¾‹é‹å‹•å—ï¼Ÿ', type:'pill', options:[{t:'æœ‰'},{t:'ç„¡'}] },
            { q:'å¸¸è™•æ–¼å¯†é–‰ç©ºé–“å—ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'æ˜¯'}] }
        ],
        'sport': [
            { q:'å¹³å‡æ¯é€±é‹å‹•å¹¾æ¬¡ï¼Ÿ', type:'circle', options:[{t:'1-2æ¬¡'},{t:'3-4æ¬¡'},{t:'5æ¬¡ä»¥ä¸Š'}] },
            { q:'é‹å‹•å¼·åº¦é€šå¸¸æ˜¯ï¼Ÿ', type:'pill', options:[{t:'è¼•åº¦'},{t:'ä¸­åº¦'},{t:'é«˜å¼·åº¦',tag:'#sport_heavy'}] },
            { q:'é‹å‹•ä¸»è¦ç›®æ¨™ï¼Ÿ', type:'pill', options:[{t:'å¥åº·'},{t:'å¢è‚Œ'},{t:'æ¸›è„‚'}] },
            { q:'é‹å‹•å¾Œç— ç—›æŒçºŒå¤šä¹…ï¼Ÿ', type:'pill', options:[{t:'éš”å¤©å¥½'},{t:'2-3å¤©'},{t:'è¶…é3å¤©'}] },
            { q:'é‹å‹•ä¸­å®¹æ˜“æŠ½ç­‹å—ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸',tag:'#cramp'}] },
            { q:'å¾Œæ®µæ˜¯å¦è¦ºå¾—æ²’åŠ›ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'ç¨å¾®'},{t:'æ˜é¡¯æ²’åŠ›'}] },
            { q:'æœ‰è£œå……è›‹ç™½è³ªå—ï¼Ÿ', type:'pill', options:[{t:'æœ‰'},{t:'ç„¡'}] },
            { q:'é—œç¯€æ˜¯å¦ä¸é©ï¼Ÿ', type:'pill', options:[{t:'ç„¡'},{t:'è†è“‹/è…°'}] },
            { q:'é‹å‹•ç•¶å¤©è¼ƒå¥½ç¡å—ï¼Ÿ', type:'pill', options:[{t:'æ˜¯'},{t:'äº¢å¥®'}] },
            { q:'æµæ±—ç¨‹åº¦ï¼Ÿ', type:'pill', options:[{t:'å°‘æ±—'},{t:'çˆ†æ±—'}] }
        ],
        'work': [
            { q:'èƒ½æŒçºŒå°ˆæ³¨çš„æ™‚é–“ï¼Ÿ', type:'circle', options:[{t:'2å°æ™‚+'},{t:'1å°æ™‚'},{t:'30åˆ†å…§',tag:'#brain_fog'}] },
            { q:'å¸¸å¿˜æ±å¿˜è¥¿(é‡‘é­šè…¦)ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] },
            { q:'åæ‡‰è®Šæ…¢ã€è…¦è¢‹éˆéˆï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'ç–²å‹æ™‚'},{t:'é•·æœŸå¦‚æ­¤'}] },
            { q:'é£¯å¾Œæ˜¯å¦ç‰¹åˆ¥æƒ³ç¡ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'ç¨å¾®'},{t:'ç„¡æ³•å…‹åˆ¶'}] },
            { q:'å¤šå·¥è™•ç†æœƒç„¦æ…®å—ï¼Ÿ', type:'pill', options:[{t:'æ‡‰ä»˜è‡ªå¦‚'},{t:'æœ‰é»å£“åŠ›'},{t:'æ··äº‚'}] },
            { q:'ä¸‹ç­å¾Œè¦ºå¾—é ­è„¹ç—›ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] },
            { q:'ç¡ä¸é£½å½±éŸ¿è¡¨ç¾å—ï¼Ÿ', type:'pill', options:[{t:'é‚„å¥½'},{t:'æœ‰å½±éŸ¿'},{t:'ç„¡æ³•å·¥ä½œ'}] },
            { q:'æ˜¯å¦æœ‰è£œå……é­šæ²¹(DHA)ï¼Ÿ', type:'pill', options:[{t:'æœ‰'},{t:'ç„¡'}] },
            { q:'å¸¸è¦ºå¾—è©±åœ¨å˜´é‚Šèªªä¸å‡ºï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] },
            { q:'å£“åŠ›å°è‡´æƒ…ç·’å¤±æ§ï¼Ÿ', type:'pill', options:[{t:'å¦'},{t:'å¶çˆ¾'},{t:'ç¶“å¸¸'}] }
        ]
    };

    // åˆå§‹ç›®æ¨™é¸æ“‡é¡Œ
    const goalQuestion = {
        id: 'goals',
        q: 'è«‹å•æ‚¨ç›®å‰æœ€æƒ³æ”¹å–„æˆ–æ˜¯ä¿é¤Šçš„åœ°æ–¹ï¼Ÿ',
        subtitle: 'AI è—¥å¸«å°‡ç‚ºæ‚¨å±•é–‹æ·±åº¦è«®è©¢ (å¯è¤‡é¸)',
        type: 'pill',
        multi: true,
        options: [
            {t:'æ¶ˆåŒ–é“æ©Ÿèƒ½', key:'digest'}, {t:'æ™¶äº®ä¸æ€•3C', key:'eye'}, {t:'å…¥ç¡ç‹€æ³', key:'sleep'}, 
            {t:'ç²¾ç¥é«”åŠ›', key:'energy'}, {t:'å¿ƒæƒ…å£“åŠ›', key:'mood'}, {t:'é¤Šé¡ç¾å®¹', key:'skin'},
            {t:'ç§å¯†ä¿é¤Š', key:'woman'}, {t:'ç”·äººèª²é¡Œ', key:'man'}, {t:'ä¿è­·åŠ›', key:'immune'},
            {t:'éª¨éª¼åŠè¡Œå‹•åŠ›', key:'bone'}, {t:'å¾ªç’°ç³»çµ±å•é¡Œ', key:'circ'}, {t:'é‹å‹•å¾Œä¿é¤Š', key:'sport'},
            {t:'ä¸æ€•æ´—é ­æ¢³é ­', key:'hair'}, {t:'ä¸Šç­èª²ä¸ç•¶æ©Ÿ', key:'work'}
        ],
        mapping: {
            'å…¥ç¡ç‹€æ³':'sleep', 'æ¶ˆåŒ–é“æ©Ÿèƒ½':'digest', 'æ™¶äº®ä¸æ€•3C':'eye', 'ä¸æ€•æ´—é ­æ¢³é ­':'hair',
            'å¿ƒæƒ…å£“åŠ›':'mood', 'ç²¾ç¥é«”åŠ›':'energy', 'ä¸Šç­èª²ä¸ç•¶æ©Ÿ':'work', 'å¾ªç’°ç³»çµ±å•é¡Œ':'circ',
            'ç§å¯†ä¿é¤Š':'woman', 'ç”·äººèª²é¡Œ':'man', 'ä¿è­·åŠ›':'immune', 'é¤Šé¡ç¾å®¹':'skin',
            'éª¨éª¼åŠè¡Œå‹•åŠ›':'bone', 'é‹å‹•å¾Œä¿é¤Š':'sport'
        }
    };

    // ============================================
    // 2. ç³»çµ±é‚è¼¯
    // ============================================
    let state = {
        queue: [goalQuestion],
        idx: 0,
        history: [], // æ™‚å…‰æ©Ÿæ­·å²
        answers: {},
        userTags: new Set(),
        userInfo: { ageY: 0, ageM: 0, bmi: 0, gender: '' }
    };

    window.onload = function() {
        const dateDiv = document.getElementById('date-selectors');
        const year = new Date().getFullYear();
        let html = `
            <select id="sel-y" class="custom-select"><option value="">å¹´</option>${Array.from({length:80}, (_,i)=>`<option>${year-i}</option>`).join('')}</select>
            <select id="sel-m" class="custom-select"><option value="">æœˆ</option>${Array.from({length:12}, (_,i)=>`<option>${i+1}</option>`).join('')}</select>
            <select id="sel-d" class="custom-select"><option value="">æ—¥</option>${Array.from({length:31}, (_,i)=>`<option>${i+1}</option>`).join('')}</select>
        `;
        dateDiv.innerHTML = html;

        dateDiv.querySelectorAll('select').forEach(s => s.addEventListener('change', () => {
            const y = document.getElementById('sel-y').value;
            const m = document.getElementById('sel-m').value;
            const d = document.getElementById('sel-d').value;
            if(y && m && d) {
                const today = new Date();
                let ageY = today.getFullYear() - y;
                let ageM = today.getMonth() + 1 - m;
                if(ageM < 0) { ageY--; ageM += 12; }
                document.getElementById('age-text').innerText = `æ‚¨ç›®å‰ ${ageY} æ­² ${ageM} å€‹æœˆ`;
                state.userInfo.ageY = ageY;
                state.userInfo.ageM = ageM;
            }
        }));
    };

    function validateAndStart() {
        const h = document.getElementById('inp-h').value;
        const w = document.getElementById('inp-w').value;
        const y = document.getElementById('sel-y').value;
        
        if(!h || !w || !y) { alert("è«‹å®Œæ•´å¡«å¯«è³‡æ–™"); return; }

        state.userInfo.gender = document.querySelector('input[name="gender"]:checked').parentElement.innerText.trim();
        state.userInfo.bmi = (w / ((h/100)*(h/100))).toFixed(1);

        if(state.userInfo.gender.includes('å…ˆç”Ÿ')) state.userTags.add('#basic_male');
        if(state.userInfo.gender.includes('å°å§')) state.userTags.add('#basic_female');

        document.getElementById('page-profile').style.display = 'none';
        document.getElementById('page-quiz').style.display = 'block';
        renderQuiz();
    }

    function renderQuiz() {
        const q = state.queue[state.idx];
        const pct = ((state.idx + 1) / (state.queue.length + 1)) * 100;
        document.getElementById('progressBar').style.width = `${pct}%`;

        let html = `
            <div class="card">
                <span class="category-tag">${q.cat || 'æ·±åº¦æª¢æ¸¬'}</span>
                <h2>${q.q}</h2>
                <div class="options-grid">
        `;

        q.options.forEach(opt => {
            const text = opt.t || opt;
            const isSel = checkSelected(q.id || `q${state.idx}`, text);
            const btnClass = q.type === 'circle' ? 'btn-circle' : 'btn-opt';
            html += `<div class="${btnClass} ${isSel?'selected':''}" onclick="handleOption('${text}', ${q.multi})">${text}</div>`;
        });

        html += `</div>
            <div class="footer-nav">
                ${state.idx > 0 ? `<button class="btn-prev" onclick="goPrev()">ä¸Šä¸€é¡Œ</button>` : ''}
                <button class="btn-main" onclick="goNext()">ä¸‹ä¸€æ­¥</button>
            </div>
        </div>`;
        document.getElementById('quiz-content').innerHTML = html;
        window.scrollTo(0,0);
    }

    function checkSelected(qid, val) {
        const stored = state.answers[qid];
        if(Array.isArray(stored)) return stored.includes(val);
        return stored === val;
    }

    window.handleOption = function(val, isMulti) {
        const q = state.queue[state.idx];
        const qid = q.id || `q${state.idx}`;
        const optObj = q.options.find(o => (o.t || o) === val);
        const tag = optObj ? optObj.tag : null;

        if(isMulti) {
            if(!state.answers[qid]) state.answers[qid] = [];
            const idx = state.answers[qid].indexOf(val);
            if(idx > -1) {
                state.answers[qid].splice(idx, 1);
                if(tag) state.userTags.delete(tag);
            } else {
                state.answers[qid].push(val);
                if(tag) state.userTags.add(tag);
            }
        } else {
            state.answers[qid] = val;
            if(tag) state.userTags.add(tag);
        }
        renderQuiz();
    }

    window.goNext = function() {
        const q = state.queue[state.idx];
        const qid = q.id || `q${state.idx}`;

        if(!state.answers[qid] || state.answers[qid].length === 0) {
            alert("è«‹é¸æ“‡ä¸€å€‹é¸é …å–”ï¼"); return;
        }

        // ä¿å­˜æ­·å²
        state.history.push(JSON.parse(JSON.stringify({
            idx: state.idx,
            queue: state.queue,
            answers: state.answers,
            tags: Array.from(state.userTags)
        })));

        if(qid === 'goals') {
            const selectedGoals = state.answers['goals'];
            let newQueue = [state.queue[0]]; 
            
            selectedGoals.forEach(g => {
                const mapObj = q.options.find(o => o.t === g); 
                const dbKey = mapObj ? mapObj.key : null;
                if(dbKey && expertDB[dbKey]) {
                    newQueue = newQueue.concat(expertDB[dbKey].map(x => ({...x, cat: g})));
                }
            });
            state.queue = newQueue;
        }

        if (state.idx < state.queue.length - 1) {
            state.idx++;
            renderQuiz();
        } else {
            showResult();
        }
    }

    window.goPrev = function() {
        if (state.history.length > 0) {
            const last = state.history.pop();
            state.idx = last.idx;
            state.queue = last.queue;
            state.answers = last.answers;
            state.userTags = new Set(last.tags);
            renderQuiz();
        }
    }

    // ============================================
    // 3. çµæœèˆ‡æ¨è–¦
    // ============================================
    function showResult() {
        document.getElementById('page-quiz').style.display = 'none';
        const resDiv = document.getElementById('page-result');
        resDiv.style.display = 'block';
        document.getElementById('progressBar').style.width = '100%';

        const bmiPos = Math.min(Math.max((state.userInfo.bmi - 15) * 4, 0), 100);
        const { basics, addons, total } = analyzeAndRecommend();

        resDiv.innerHTML = `
            <div class="dashboard">
                <div class="user-head">
                    <div>
                        <h2 style="margin:0; font-size:1.8rem; color:#333;">Hi, ${state.userInfo.gender}</h2>
                        <div style="color:#666; margin-top:5px;">${state.userInfo.ageY} æ­² | BMI ${state.userInfo.bmi}</div>
                    </div>
                    <div class="score-circle">
                        <span style="font-size:1.6rem; line-height:1;">78</span><span style="font-size:0.7rem;">å¥åº·åˆ†</span>
                    </div>
                </div>
                <div style="font-weight:bold; color:#666;">BMI é«”ä½è½é»</div>
                <div class="bmi-bar"><div class="bmi-pointer" style="left:${bmiPos}%"></div></div>
                <div style="margin-top:30px; height:250px;"><canvas id="radarChart"></canvas></div>
            </div>

            <div class="prod-list">
                <div class="prod-head">åŸºç¤ä¿é¤Š (æ‚¨çš„å¥åº·åº•åº§)</div>
                ${basics.map(renderProd).join('')}

                <div class="prod-head bonus">å®¢è£½åŒ–èª¿ç† (é‡å°æ‚¨çš„ç—‡ç‹€æ¨™ç±¤)</div>
                ${addons.length > 0 ? addons.map(renderProd).join('') : '<div style="padding:20px;">æ‚¨çš„ç‹€æ³ç¶­æŒè‰¯å¥½ï¼</div>'}
            </div>

            <div style="text-align:center; padding:30px; background:white; position:sticky; bottom:0; box-shadow:0 -5px 15px rgba(0,0,0,0.05);">
                <div style="font-size:1.4rem; font-weight:bold; color:var(--accent);">ç¸½è¨ˆ NT$ ${total} / æœˆ</div>
                <button class="btn-main" onclick="alert('çµå¸³')" style="margin-top:15px; width:100%;">ä¸€éµè¨‚é–±æ–¹æ¡ˆ</button>
            </div>
        `;
        drawChart();
    }

    function analyzeAndRecommend() {
        let basics = [];
        let addons = [];
        let total = 0;
        const tags = Array.from(state.userTags);

        productsDB.forEach(p => {
            const isMatch = p.tags.some(t => tags.includes(t));
            if(p.id.startsWith('b')) {
                if(isMatch || p.id === 'b3' || p.id === 'b4') { // é è¨­æ¨ D3 å’Œ é­šæ²¹
                    if(!basics.find(x=>x.id===p.id)) basics.push(p);
                }
            } else {
                if(isMatch) {
                    if(!addons.find(x=>x.id===p.id)) addons.push(p);
                }
            }
        });

        [...basics, ...addons].forEach(p => total += p.price);
        return { basics, addons, total };
    }

    function renderProd(p) {
        const matchTag = p.tags.find(t => state.userTags.has(t));
        const reason = matchTag ? `é‡å° ${translateTag(matchTag)}` : p.desc;
        // æ”¯æ´é»æ“Šè·³è½‰ (è‹¥ç„¡ç¶²å€å‰‡æœ Google)
        const link = p.url || `https://www.google.com/search?q=${p.name}`;
        const imgUrl = p.img || 'https://placehold.co/100x100/EEE/333?text=Product';

        return `
            <a href="${link}" target="_blank" style="text-decoration:none; color:inherit;">
                <div class="prod-item">
                    <div class="p-img" style="background-image:url('${imgUrl}')"></div>
                    <div style="flex:1;">
                        <div style="font-weight:bold; font-size:1.1rem; color:#333;">${p.name} <i class="fa-solid fa-arrow-up-right-from-square" style="font-size:0.8rem;color:#999;"></i></div>
                        <div style="font-size:0.9rem; color:#666; margin-top:4px;">${p.desc}</div>
                        <span class="tag"><i class="fa-solid fa-check"></i> ${reason}</span>
                    </div>
                    <div class="p-price">NT$${p.price}</div>
                </div>
            </a>
        `;
    }

    function translateTag(t) {
        const map = {'#sleep_hard':'å…¥ç¡å›°é›£', '#sleep_wake':'æ·ºçœ ', '#constipation':'æ’ä¾¿ä¸é †', '#eye_use_heavy':'ç”¨çœ¼éåº¦', '#tired':'å®¹æ˜“ç–²å‹'};
        return map[t] || 'æ‚¨çš„éœ€æ±‚';
    }

    function drawChart() {
        const ctx = document.getElementById('radarChart').getContext('2d');
        new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['ç¡çœ ','æ¶ˆåŒ–','è­·çœ¼','é«”åŠ›','é˜²è­·'],
                datasets: [{ label: 'å¥åº·æŒ‡æ•¸', data: [65,55,80,70,60], backgroundColor: 'rgba(62,107,101,0.2)', borderColor:'#3E6B65' }]
            },
            options: { scales: { r: { min:0, max:100, ticks:{display:false} } }, plugins:{legend:{display:false}}, maintainAspectRatio:false }
        });
    }
</script>
</body>
</html>